<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LCKY HUB</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/main.css">
  <style>
    /* Galaxy Background */
    .galaxy-background {
      position: fixed;
      inset: 0;
      background: #0D0B14;
      background-image: url('../assets/img/bg.png');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      z-index: -1;
    }

    .galaxy-background::before {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(13, 11, 20, 0.5);
    }

    /* Nav Column */
    .nav-column {
      width: 220px;
      min-width: 220px;
      background: rgba(13, 11, 20, 0.95);
      border-right: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      flex-direction: column;
    }

    .nav-header {
      padding: 16px 20px;
      font-size: 14px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 1px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      margin: 4px 8px;
      border-radius: 8px;
      color: rgba(255, 255, 255, 0.7);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .nav-item:hover {
      background: rgba(139, 92, 246, 0.1);
      color: white;
    }

    .nav-item.active {
      background: rgba(139, 92, 246, 0.2);
      color: #A78BFA;
    }

    .nav-item svg {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }

    .nav-item .badge {
      margin-left: auto;
      background: rgba(139, 92, 246, 0.3);
      color: #A78BFA;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 11px;
      font-weight: 600;
    }

    /* Dashboard Tiles */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 24px;
    }

    .dashboard-tile {
      background: rgba(21, 18, 31, 0.8);
      border: 1px solid rgba(139, 92, 246, 0.2);
      border-radius: 16px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .dashboard-tile:hover {
      border-color: rgba(139, 92, 246, 0.5);
      transform: translateY(-4px);
      box-shadow: 0 10px 30px rgba(139, 92, 246, 0.2);
    }

    .tile-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      background: rgba(139, 92, 246, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 16px;
      color: #A78BFA;
    }

    .tile-icon.red {
      background: rgba(255, 71, 87, 0.2);
      color: #FF4757;
    }

    .tile-icon.purple {
      background: rgba(167, 139, 250, 0.2);
      color: #A78BFA;
    }

    .tile-icon svg {
      width: 24px;
      height: 24px;
    }

    .dashboard-tile h3 {
      font-size: 18px;
      font-weight: 600;
      color: white;
      margin-bottom: 8px;
    }

    .dashboard-tile p {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.5);
      line-height: 1.5;
      margin-bottom: 16px;
    }

    .tile-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      background: rgba(139, 92, 246, 0.2);
      border: 1px solid rgba(139, 92, 246, 0.4);
      border-radius: 8px;
      color: #A78BFA;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tile-btn:hover {
      background: rgba(139, 92, 246, 0.3);
      border-color: #8B5CF6;
    }

    /* Friends Page */
    .friends-container {
      padding: 24px;
    }

    .friends-section {
      margin-bottom: 32px;
    }

    .friends-section h2 {
      font-size: 14px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 16px;
    }

    .friends-section h2 .count {
      background: rgba(139, 92, 246, 0.3);
      color: #A78BFA;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 11px;
      margin-left: 8px;
    }

    .friends-grid {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .friend-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: rgba(21, 18, 31, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .friend-item:hover {
      background: rgba(21, 18, 31, 0.9);
      border-color: rgba(139, 92, 246, 0.3);
    }

    /* Chat Page */
    .chat-container {
      display: flex;
      height: 100%;
    }

    .chat-list {
      width: 280px;
      min-width: 280px;
      background: rgba(13, 11, 20, 0.95);
      border-right: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      flex-direction: column;
    }

    .chat-list-header {
      padding: 16px 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }

    .chat-list-header h2 {
      font-size: 16px;
      font-weight: 600;
      color: white;
      margin-bottom: 12px;
    }

    .chat-search {
      width: 100%;
      padding: 10px 14px;
      background: rgba(21, 18, 31, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: white;
      font-size: 13px;
    }

    .chat-search:focus {
      outline: none;
      border-color: #8B5CF6;
    }

    .chat-items {
      flex: 1;
      overflow-y: auto;
      padding: 8px;
    }

    .chat-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .chat-item:hover {
      background: rgba(139, 92, 246, 0.1);
    }

    .chat-item.active {
      background: rgba(139, 92, 246, 0.2);
    }

    .chat-main {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .chat-header {
      padding: 16px 24px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .chat-header h3 {
      font-size: 16px;
      font-weight: 600;
      color: white;
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .chat-empty {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(255, 255, 255, 0.4);
      font-size: 14px;
    }

    .chat-input-area {
      padding: 16px 24px;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      gap: 12px;
    }

    .chat-input {
      flex: 1;
      padding: 12px 16px;
      background: rgba(21, 18, 31, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      color: white;
      font-size: 14px;
    }

    .chat-input:focus {
      outline: none;
      border-color: #8B5CF6;
    }

    .chat-send-btn {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      background: #8B5CF6;
      border: none;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .chat-send-btn:hover {
      background: #7C3AED;
    }

    .chat-send-btn svg {
      width: 20px;
      height: 20px;
    }

    /* Stream Page */
    .stream-container {
      padding: 24px;
    }

    .stream-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 24px;
    }

    /* User Section at Bottom */
    .user-section {
      margin-top: auto;
      padding: 12px 8px;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
    }

    .user-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .user-item:hover {
      background: rgba(139, 92, 246, 0.1);
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 12px;
      color: white;
      position: relative;
    }

    .user-avatar .status-dot {
      position: absolute;
      bottom: -2px;
      right: -2px;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #00FF88;
      border: 2px solid #15121F;
    }

    .user-info {
      flex: 1;
      min-width: 0;
    }

    .user-name {
      font-size: 13px;
      font-weight: 500;
      color: white;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .user-status {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.5);
    }

    .settings-btn {
      width: 32px;
      height: 32px;
      border-radius: 6px;
      background: transparent;
      border: none;
      color: rgba(255, 255, 255, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .settings-btn:hover {
      background: rgba(139, 92, 246, 0.2);
      color: #A78BFA;
    }

    .settings-btn svg {
      width: 18px;
      height: 18px;
    }

    /* Titlebar Brand Colors */
    .lucky {
      color: #A78BFA;
    }

    .hub {
      color: #8B5CF6;
    }

    /* Hide pages */
    .page {
      display: none;
      height: 100%;
    }

    .page.active {
      display: block;
    }

    .hidden {
      display: none !important;
    }

    /* Page specific containers */
    .friends-container,
    .chat-container,
    .stream-container {
      height: 100%;
    }
  </style>
</head>
<body>
  <!-- Galaxy Background -->
  <div class="galaxy-background"></div>
  
  <!-- === TITLEBAR === -->
  <div class="titlebar">
    <div class="titlebar-left">
      <div class="titlebar-logo" onclick="goHome()">
        <img src="../assets/img/logo-rbg.png" alt="LCKY HUB">
      </div>
      <span class="titlebar-brand">
        <span class="lucky">LCKY</span><span class="hub">HUB</span>
      </span>
    </div>
    <div class="titlebar-center">
      <span class="titlebar-time" id="titlebarTime">--:-- | --.--.----</span>
    </div>
    <div class="titlebar-right">
      <button class="titlebar-btn" id="minimizeBtn" title="Minimieren">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/></svg>
      </button>
      <button class="titlebar-btn" id="maximizeBtn" title="Maximieren">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="4" width="16" height="16" rx="1"/></svg>
      </button>
      <button class="titlebar-btn close" id="closeBtn" title="Schließen">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 18L18 6M6 6l12 12"/></svg>
      </button>
    </div>
  </div>
  
  <!-- === APP CONTAINER === -->
  <div class="app-container">
    
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-item active" data-page="dashboard" title="Dashboard">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
          </svg>
        </div>
      </div>
      <div class="sidebar-separator"></div>
      <div class="sidebar-section">
        <div class="sidebar-item" data-page="friends" title="Freunde">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
          </svg>
          <span class="badge">3</span>
        </div>
        <div class="sidebar-item" data-page="chat" title="Nachrichten">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
          </svg>
        </div>
      </div>
      <div class="sidebar-separator"></div>
      <div class="sidebar-section" style="margin-top: auto;">
        <div class="sidebar-item" data-page="reflex" title="Reflex Lab">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
        </div>
        <div class="sidebar-item" data-page="stream" title="Stream">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
          </svg>
        </div>
      </div>
      
      <!-- User Section at Bottom -->
      <div class="user-section">
        <div class="user-item" onclick="openSettings()">
          <div class="user-avatar" id="user-avatar">--</div>
          <div class="user-info">
            <div class="user-name" id="user-name">Guest</div>
            <div class="user-status">Online</div>
          </div>
          <button class="settings-btn" title="Einstellungen">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Navigation Column -->
    <div class="nav-column">
      <div class="nav-header">LCKY HUB</div>
      <div class="nav-item active" data-page="dashboard">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
        </svg>
        Dashboard
      </div>
      <div class="nav-item" data-page="friends">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
        </svg>
        Freunde
        <span class="badge">3</span>
      </div>
      <div class="nav-item" data-page="chat">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
        </svg>
        Nachrichten
      </div>
      <div class="nav-item" data-page="reflex">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 6v6l4 2"/>
        </svg>
        Reflex Lab
      </div>
      <div class="nav-item" data-page="stream">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
        </svg>
        Stream
      </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
      
      <!-- Dashboard Page -->
      <div id="page-dashboard" class="page active">
        <div class="dashboard">
          <div class="dashboard-header">
            <h1><span class="lucky">LCKY</span> <span class="hub">HUB</span></h1>
            <p style="color: rgba(255,255,255,0.5); margin-top: 8px;">Willkommen zurück! Hier ist dein Überblick.</p>
          </div>
          <div class="dashboard-grid">
            <div class="dashboard-tile" onclick="navigateTo('chat')">
              <div class="tile-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
              </div>
              <h3>Nachrichten</h3>
              <p>Schreibe Nachrichten an Freunde. Voice & Video Calls inklusive.</p>
              <span class="tile-btn">Öffnen →</span>
            </div>
            <div class="dashboard-tile" onclick="navigateTo('stream')">
              <div class="tile-icon red">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
              </div>
              <h3>Stream</h3>
              <p>Starte deinen eigenen Live-Stream oder schaue anderen zu.</p>
              <span class="tile-btn">Live gehen →</span>
            </div>
            <div class="dashboard-tile" onclick="navigateTo('friends')">
              <div class="tile-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                  <circle cx="9" cy="7" r="4"/>
                </svg>
              </div>
              <h3>Freunde</h3>
              <p>Verwalte deine Freundesliste und lerne neue Leute kennen.</p>
              <span class="tile-btn">Verwalten →</span>
            </div>
            <div class="dashboard-tile" onclick="navigateTo('reflex')">
              <div class="tile-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 6v6l4 2"/>
                </svg>
              </div>
              <h3>Reflex Lab</h3>
              <p>Trainiere deine Reflexe, Aim und Präzision mit verschiedenen Modi.</p>
              <span class="tile-btn">Trainieren →</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Friends Page -->
      <div id="page-friends" class="page">
        <div class="friends-container">
          <div class="friends-section">
            <h2>Online <span class="count">2</span></h2>
            <div class="friends-grid" id="friends-online"></div>
          </div>
          <div class="friends-section">
            <h2>Offline <span class="count">1</span></h2>
            <div class="friends-grid" id="friends-offline"></div>
          </div>
        </div>
      </div>
      
      <!-- Chat Page -->
      <div id="page-chat" class="page">
        <div class="chat-container">
          <div class="chat-list">
            <div class="chat-list-header">
              <h2>Direktnachrichten</h2>
              <input type="text" class="chat-search" placeholder="Suchen..." id="chatSearch">
            </div>
            <div class="chat-items" id="chatItems"></div>
          </div>
          <div class="chat-main">
            <div class="chat-header">
              <h3 id="activeChatName">Wähle einen Chat</h3>
            </div>
            <div class="chat-messages" id="chatMessages">
              <div class="chat-empty">Wähle einen Chat links aus oder starte eine neue Unterhaltung.</div>
            </div>
            <div class="chat-input-area">
              <input type="text" class="chat-input" placeholder="Nachricht eingeben..." id="chatInput" disabled>
              <button class="chat-send-btn" id="chatSendBtn" disabled>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Reflex Page -->
      <div id="page-reflex" class="page">
        <div class="dashboard">
          <div class="dashboard-header">
            <h1><span class="lucky">Reflex</span> <span class="hub">Lab</span></h1>
            <p style="color: rgba(255,255,255,0.5); margin-top: 8px;">Trainiere deine Reflexe und Aim.</p>
          </div>
          <div class="dashboard-grid">
            <div class="dashboard-tile" onclick="startReflex('reflex')">
              <div class="tile-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                </svg>
              </div>
              <h3>Reflex Test</h3>
              <p>Teste deine Reaktionszeit in Millisekunden.</p>
              <span class="tile-btn">Starten →</span>
            </div>
            <div class="dashboard-tile" onclick="startReflex('aim')">
              <div class="tile-icon red">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="4"/>
                  <line x1="22" y1="12" x2="18" y2="12"/>
                  <line x1="6" y1="12" x2="2" y2="12"/>
                  <line x1="12" y1="6" x2="12" y2="2"/>
                  <line x1="12" y1="22" x2="12" y2="18"/>
                </svg>
              </div>
              <h3>Aim Training</h3>
              <p>Ziele auf erscheindende Ziele so schnell wie möglich ab.</p>
              <span class="tile-btn">Trainieren →</span>
            </div>
            <div class="dashboard-tile" onclick="startReflex('precision')">
              <div class="tile-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
              </div>
              <h3>Präzision</h3>
              <p>Trainiere deine Genauigkeit mit verschiedenen Schwierigkeitsstufen.</p>
              <span class="tile-btn">Üben →</span>
            </div>
            <div class="dashboard-tile" onclick="startReflex('memory')">
              <div class="tile-icon purple">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                  <path d="M3 9h18M9 21V9"/>
                </svg>
              </div>
              <h3>Gedächtnis</h3>
              <p>Merke dir Muster und verbessere dein visuelles Gedächtnis.</p>
              <span class="tile-btn">Spielen →</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Stream Page -->
      <div id="page-stream" class="page">
        <div class="stream-container">
          <div class="dashboard-header">
            <h1>Live <span class="hub">Stream</span></h1>
            <p style="color: rgba(255,255,255,0.5); margin-top: 8px;">Starte deinen eigenen Stream.</p>
          </div>
          <div class="stream-grid">
            <div class="dashboard-tile" onclick="startStream()">
              <div class="tile-icon red">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <circle cx="12" cy="12" r="4" fill="currentColor"/>
                </svg>
              </div>
              <h3>Live gehen</h3>
              <p>Starte deinen Stream mit Kamera und Mikrofon.</p>
              <span class="tile-btn">Starten →</span>
            </div>
            <div class="dashboard-tile">
              <div class="tile-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                  <line x1="8" y1="21" x2="16" y2="21"/>
                  <line x1="12" y1="17" x2="12" y2="21"/>
                </svg>
              </div>
              <h3>Screen Share</h3>
              <p>Teile deinen Bildschirm mit der Community.</p>
              <span class="tile-btn">Teilen →</span>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal-overlay" id="settingsModal">
    <div class="modal settings-modal">
      <div class="modal-header">
        <h2>Einstellungen</h2>
        <button class="modal-close" onclick="closeSettings()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="settings-sidebar">
          <div class="settings-nav-item active" data-tab="profile">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
            Profil
          </div>
          <div class="settings-nav-item" data-tab="appearance">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="5"/>
              <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
            </svg>
            Erscheinungsbild
          </div>
          <div class="settings-nav-item" data-tab="notifications">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
              <path d="M13.73 21a2 2 0 01-3.46 0"/>
            </svg>
            Benachrichtigungen
          </div>
          <div class="settings-nav-item" data-tab="privacy">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0110 0v4"/>
            </svg>
            Datenschutz
          </div>
          <div class="settings-nav-item" data-tab="account">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
            Konto
          </div>
        </div>
        <div class="settings-content">
          <!-- Profile Tab -->
          <div class="settings-tab active" id="tab-profile">
            <h3>Profil</h3>
            <div class="settings-section">
              <div class="profile-avatar-section">
                <div class="profile-avatar" id="settings-avatar">--</div>
                <div class="profile-avatar-info">
                  <button class="btn btn-secondary" onclick="changeAvatar()">Avatar ändern</button>
                  <span class="hint">PNG oder JPG, max. 2MB</span>
                </div>
              </div>
            </div>
            <div class="settings-section">
              <label>Benutzername</label>
              <input type="text" id="settings-username" placeholder="Dein Benutzername">
            </div>
            <div class="settings-section">
              <label>E-Mail</label>
              <input type="email" id="settings-email" placeholder="deine@email.de" disabled>
              <span class="hint">E-Mail kann nicht geändert werden</span>
            </div>
            <div class="settings-section">
              <label>Status</label>
              <select id="settings-status">
                <option value="online">Online</option>
                <option value="idle">Abwesend</option>
                <option value="dnd">Nicht stören</option>
                <option value="invisible">Unsichtbar</option>
              </select>
            </div>
            <div class="settings-section">
              <label>Über dich</label>
              <textarea id="settings-bio" rows="3" placeholder="Schreibe etwas über dich..."></textarea>
            </div>
            <button class="btn btn-primary" onclick="saveProfileSettings()">Änderungen speichern</button>
          </div>

          <!-- Appearance Tab -->
          <div class="settings-tab" id="tab-appearance">
            <h3>Erscheinungsbild</h3>
            <div class="settings-section">
              <label>Design</label>
              <div class="theme-options">
                <div class="theme-option active" data-theme="dark" onclick="selectTheme('dark')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                  </svg>
                  <span>Dunkel</span>
                </div>
                <div class="theme-option" data-theme="light" onclick="selectTheme('light')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"/>
                    <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                  </svg>
                  <span>Hell</span>
                </div>
                <div class="theme-option" data-theme="system" onclick="selectTheme('system')">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                    <line x1="8" y1="21" x2="16" y2="21"/>
                    <line x1="12" y1="17" x2="12" y2="21"/>
                  </svg>
                  <span>System</span>
                </div>
              </div>
            </div>
            <div class="settings-section">
              <label>Sprache</label>
              <select id="settings-language" onchange="changeLanguage(this.value)">
                <option value="de">Deutsch</option>
                <option value="en">English</option>
              </select>
            </div>
            <div class="settings-section">
              <label>Animations</label>
              <div class="toggle-option">
                <span>Animierungen aktivieren</span>
                <label class="toggle">
                  <input type="checkbox" id="settings-animations" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
          </div>

          <!-- Notifications Tab -->
          <div class="settings-tab" id="tab-notifications">
            <h3>Benachrichtigungen</h3>
            <div class="settings-section">
              <label>Allgemein</label>
              <div class="toggle-option">
                <span>Nachrichten-Benachrichtigungen</span>
                <label class="toggle">
                  <input type="checkbox" id="notif-messages" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="toggle-option">
                <span>Freundschaftsanfragen</span>
                <label class="toggle">
                  <input type="checkbox" id="notif-friends" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="toggle-option">
                <span>Stream-Benachrichtigungen</span>
                <label class="toggle">
                  <input type="checkbox" id="notif-streams" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
            <div class="settings-section">
              <label>Sound</label>
              <div class="toggle-option">
                <span>Benachrichtigungston</span>
                <label class="toggle">
                  <input type="checkbox" id="notif-sound" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="toggle-option">
                <span>Laustärke</span>
                <input type="range" id="notif-volume" min="0" max="100" value="50">
              </div>
            </div>
          </div>

          <!-- Privacy Tab -->
          <div class="settings-tab" id="tab-privacy">
            <h3>Datenschutz</h3>
            <div class="settings-section">
              <label>Sichtbarkeit</label>
              <div class="toggle-option">
                <span>Online-Status anzeigen</span>
                <label class="toggle">
                  <input type="checkbox" id="privacy-online" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="toggle-option">
                <span>Profilsichtbar für alle</span>
                <label class="toggle">
                  <input type="checkbox" id="privacy-profile" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
            <div class="settings-section">
              <label>Daten</label>
              <button class="btn btn-secondary" onclick="exportData()">Daten exportieren</button>
              <button class="btn btn-secondary" style="margin-left: 10px;" onclick="clearCache()">Cache leeren</button>
            </div>
          </div>

          <!-- Account Tab -->
          <div class="settings-tab" id="tab-account">
            <h3>Konto</h3>
            <div class="settings-section">
              <label>Kontosicherheit</label>
              <button class="btn btn-secondary" onclick="changePassword()">Passwort ändern</button>
              <button class="btn btn-secondary" style="margin-left: 10px;" onclick="enableTwoFactor()">2-Faktor-Authentifizierung</button>
            </div>
            <div class="settings-section account-danger">
              <label style="color: #ff6b6b;">Gefahrenzone</label>
              <p style="color: rgba(255,255,255,0.6); font-size: 13px; margin-bottom: 15px;">
                Diese Aktionen sind unwiderruflich. Bitte sei vorsichtig.
              </p>
              <button class="btn btn-danger" onclick="logout()">Abmelden</button>
              <button class="btn btn-danger" style="margin-left: 10px;" onclick="deleteAccount()">Konto löschen</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="web.js"></script>
  <script>
    // State
    const state = {
      user: null,
      currentPage: 'dashboard',
      friends: [],
      messages: {},
      currentChat: null
    };

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      loadUser();
      loadFriends();
      updateTime();
      setInterval(updateTime, 1000);
      setupNavigation();
      setupWindowControls();
    });

    // Load user
    function loadUser() {
      const sessionData = localStorage.getItem('lucky_hub_session');
      if (sessionData) {
        state.user = JSON.parse(sessionData);
        updateUserDisplay();
      } else {
        window.location.href = 'login.html';
      }
    }

    // Update user display
    function updateUserDisplay() {
      if (state.user) {
        const name = state.user.displayName || state.user.username || state.user.email?.split('@')[0] || 'User';
        document.getElementById('user-name').textContent = name;
        document.getElementById('user-avatar').textContent = name.substring(0, 2).toUpperCase();
      }
    }

    // Setup navigation
    function setupNavigation() {
      document.querySelectorAll('.nav-item, .sidebar-item').forEach(item => {
        item.addEventListener('click', () => {
          const page = item.dataset.page;
          if (page) navigateTo(page);
        });
      });
    }

    // Navigate to page
    function navigateTo(page) {
      state.currentPage = page;
      
      // Update nav items
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.toggle('active', item.dataset.page === page);
      });
      
      // Update sidebar items
      document.querySelectorAll('.sidebar-item').forEach(item => {
        item.classList.toggle('active', item.dataset.page === page);
      });
      
      // Show/hide pages
      document.querySelectorAll('.page').forEach(p => {
        p.classList.remove('active');
      });
      document.getElementById(`page-${page}`)?.classList.add('active');
    }

    // Go home
    function goHome() {
      navigateTo('dashboard');
    }

    // Open settings
    function openSettings() {
      alert('Einstellungen werden bald verfügbar sein.');
    }

    // Setup window controls
    function setupWindowControls() {
      const minimizeBtn = document.getElementById('minimizeBtn');
      const maximizeBtn = document.getElementById('maximizeBtn');
      const closeBtn = document.getElementById('closeBtn');

      if (minimizeBtn) {
        minimizeBtn.addEventListener('click', () => {
          if (window.electronAPI) {
            window.electronAPI.minimize();
          } else {
            window.minimize();
          }
        });
      }

      if (maximizeBtn) {
        maximizeBtn.addEventListener('click', () => {
          if (window.electronAPI) {
            window.electronAPI.maximize();
          } else {
            if (document.documentElement.requestFullscreen) {
              if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
              } else {
                document.exitFullscreen();
              }
            }
          }
        });
      }

      if (closeBtn) {
        closeBtn.addEventListener('click', () => {
          if (window.electronAPI) {
            window.electronAPI.close();
          } else {
            window.close();
          }
        });
      }
    }

    // Update time
    function updateTime() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });
      const dateStr = now.toLocaleDateString('de-DE', { day: '2-digit', month: '2-digit', year: 'numeric' });
      const timeEl = document.getElementById('titlebarTime');
      if (timeEl) {
        timeEl.textContent = `${timeStr} | ${dateStr}`;
      }
    }

    // Load friends
    function loadFriends() {
      const savedFriends = localStorage.getItem('lcky_friends');
      if (savedFriends) {
        state.friends = JSON.parse(savedFriends);
      } else {
        state.friends = [
          { id: '1', name: 'Alex Gaming', status: 'online', activity: 'Playing Reflex Test' },
          { id: '2', name: 'Sarah Pro', status: 'idle', activity: 'Idle' },
          { id: '3', name: 'Mike FPS', status: 'dnd', activity: 'Do Not Disturb' },
          { id: '4', name: 'Emma Chill', status: 'offline', activity: 'Offline' }
        ];
      }
      renderFriends();
      renderChatList();
    }

    // Render friends
    function renderFriends() {
      const onlineContainer = document.getElementById('friends-online');
      const offlineContainer = document.getElementById('friends-offline');
      
      if (!onlineContainer || !offlineContainer) return;

      const online = state.friends.filter(f => f.status === 'online' || f.status === 'idle' || f.status === 'dnd');
      const offline = state.friends.filter(f => f.status === 'offline');

      onlineContainer.innerHTML = online.map(friend => createFriendHTML(friend)).join('');
      offlineContainer.innerHTML = offline.map(friend => createFriendHTML(friend)).join('');
    }

    // Create friend HTML
    function createFriendHTML(friend) {
      return `
        <div class="friend-item" onclick="openChat('${friend.id}')">
          <div class="avatar">
            <span class="avatar-placeholder">${friend.name.substring(0, 2).toUpperCase()}</span>
            <span class="status-dot ${friend.status}"></span>
          </div>
          <div class="friend-info">
            <div class="friend-name">${friend.name}</div>
            <div class="friend-status">${friend.activity}</div>
          </div>
        </div>
      `;
    }

    // Render chat list
    function renderChatList() {
      const container = document.getElementById('chatItems');
      if (!container) return;

      container.innerHTML = state.friends.map(friend => `
        <div class="chat-item" onclick="openChat('${friend.id}')">
          <div class="avatar" style="width: 36px; height: 36px;">
            <span class="avatar-placeholder" style="font-size: 12px;">${friend.name.substring(0, 2).toUpperCase()}</span>
          </div>
          <div style="flex: 1; min-width: 0;">
            <div style="font-size: 14px; font-weight: 500; color: white;">${friend.name}</div>
            <div style="font-size: 12px; color: rgba(255,255,255,0.5);">${friend.activity}</div>
          </div>
        </div>
      `).join('');
    }

    // Open chat
    function openChat(friendId) {
      const friend = state.friends.find(f => f.id === friendId);
      if (!friend) return;

      state.currentChat = friend;
      navigateTo('chat');

      document.getElementById('activeChatName').textContent = friend.name;
      document.getElementById('chatInput').disabled = false;
      document.getElementById('chatSendBtn').disabled = false;

      // Load messages
      loadMessages(friendId);
    }

    // Load messages
    function loadMessages(friendId) {
      const messagesContainer = document.getElementById('chatMessages');
      const messages = state.messages[friendId] || [];

      if (messages.length === 0) {
        messagesContainer.innerHTML = '<div class="chat-empty">Noch keine Nachrichten. Beginne das Gespräch!</div>';
        return;
      }

      messagesContainer.innerHTML = messages.map(msg => `
        <div class="message ${msg.isMe ? 'own' : ''}">
          <div class="message-avatar">${msg.sender.substring(0, 2).toUpperCase()}</div>
          <div class="message-content">
            <div class="message-header">
              <span class="message-sender">${msg.sender}</span>
              <span class="message-time">${msg.time}</span>
            </div>
            <div class="message-text">${msg.text}</div>
          </div>
        </div>
      `).join('');

      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    // Send message
    document.addEventListener('DOMContentLoaded', () => {
      const chatInput = document.getElementById('chatInput');
      const chatSendBtn = document.getElementById('chatSendBtn');

      if (chatSendBtn) {
        chatSendBtn.addEventListener('click', sendChatMessage);
      }

      if (chatInput) {
        chatInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') sendChatMessage();
        });
      }
    });

    function sendChatMessage() {
      const chatInput = document.getElementById('chatInput');
      const text = chatInput?.value.trim();
      if (!text || !state.currentChat) return;

      const message = {
        sender: state.user?.displayName || state.user?.username || 'User',
        text: text,
        time: new Date().toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' }),
        isMe: true
      };

      if (!state.messages[state.currentChat.id]) {
        state.messages[state.currentChat.id] = [];
      }
      state.messages[state.currentChat.id].push(message);
      localStorage.setItem('lcky_messages', JSON.stringify(state.messages));

      chatInput.value = '';
      loadMessages(state.currentChat.id);
    }

    // Start reflex game
    function startReflex(mode) {
      const gamePages = {
        'reflex': 'reflex-test.html',
        'aim': 'aim-rings.html',
        'precision': 'precision-game.html',
        'memory': 'memory-game.html'
      };
      
      if (gamePages[mode]) {
        window.location.href = gamePages[mode];
      }
    }

    // Start stream
    function startStream() {
      alert('Stream-Funktion wird bald verfügbar sein.');
    }
  </script>
</body>
</html>
